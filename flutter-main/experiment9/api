import 'package:flutter/material.dart';
import 'package:http/http.dart' as http;
import 'dart:convert';

void main() => runApp(const MaterialApp(home: ApiDemo()));

class ApiDemo extends StatefulWidget {
  const ApiDemo({super.key});
  @override State<ApiDemo> createState() => _ApiDemoState();
}

class _ApiDemoState extends State<ApiDemo> {
  List data = [];
  @override void initState() { super.initState(); fetch(); }
  fetch() async {
    final res = await http.get(Uri.parse("https://jsonplaceholder.typicode.com/users"));
    setState(() => data = jsonDecode(res.body));
  }
  @override Widget build(BuildContext c) => Scaffold(
    body: data.isEmpty ? const CircularProgressIndicator() :
      ListView(children: data.map((u) => ListTile(title: Text(u['name'] ?? ''))).toList()),
  );
}
